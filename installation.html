<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installing IBM i collection to Ansible server &mdash; IBM power_ibmi collection 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=8d563738"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running Ansible to manage IBM i systems" href="getting_started.html" />
    <link rel="prev" title="Power IBM i collection for Ansible" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            IBM power_ibmi collection
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installing IBM i collection to Ansible server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requirements-for-ibm-i-ansible-server">Requirements for IBM i Ansible Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-using-ansible-galaxy">Installing using Ansible Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-from-source">Installing from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="#enabling-ibm-i-nodes">Enabling IBM i nodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Running Ansible to manage IBM i systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">IBM power_ibmi collection</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installing IBM i collection to Ansible server</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/IBM/ansible-for-i/blob/devel/docs/source/installation.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installing-ibm-i-collection-to-ansible-server">
<h1>Installing IBM i collection to Ansible server<a class="headerlink" href="#installing-ibm-i-collection-to-ansible-server" title="Link to this heading"></a></h1>
<p>There are two options to install IBM i collection for Ansible:</p>
<ul>
<li><p>Installing from Ansible Galaxy</p>
<p>Ansible Galaxy is the package manager for Ansible. The collection is published to Ansible Galaxy on a regular basis: <a class="reference external" href="https://galaxy.ansible.com/ibm/power_ibmi">https://galaxy.ansible.com/ibm/power_ibmi</a></p>
<p>In order to install using Ansible Galaxy, you must:</p>
<ol class="arabic simple">
<li><p>Install all of the software listed in <a class="reference internal" href="#requirements"><span class="std std-ref">Requirements</span></a>.</p></li>
<li><p>Follow the instructions for <a class="reference internal" href="#installing-using-ansible-galaxy"><span class="std std-ref">Installing using Ansible Galaxy</span></a>.</p></li>
</ol>
</li>
<li><p>Installing from source</p>
<p>You may wish to install the collection from source if you cannot access Ansible Galaxy due to firewall or proxy issues, or if you need to install a version of the collection that has not yet been published.</p>
<p>In order to install from source, you must:</p>
<ol class="arabic simple">
<li><p>Install all of the software listed in <a class="reference internal" href="#requirements"><span class="std std-ref">Requirements</span></a>.</p></li>
<li><p>Follow the instructions for <a class="reference internal" href="#installing-from-source"><span class="std std-ref">Installing from source</span></a>.</p></li>
</ol>
</li>
</ul>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h2>
<p>In order to use this Ansible collection at <strong>release 2.0.0</strong> and beyond, you must have the following pre-requisite software installed and available on your Ansible server:</p>
<p><strong>Python v3.9+</strong></p>
<blockquote>
<div><p>Python can be installed from a variety of sources, including the package manager for your operating system (apt, yum, etc).
If you install Python from the package manager for your operating system, you must also install the development libraries (usually a package named <code class="docutils literal notranslate"><span class="pre">python3-devel</span></code>), as these are required when installing modules through <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<ul class="simple">
<li><p>The official Python website: <a class="reference external" href="https://www.python.org/downloads/">https://www.python.org/downloads/</a></p></li>
<li><p>The unofficial Python version manager: <a class="reference external" href="https://github.com/pyenv/pyenv">https://github.com/pyenv/pyenv</a></p></li>
</ul>
</div></blockquote>
<p><strong>Ansible v2.14+</strong></p>
<blockquote>
<div><p>Ansible can be installed from a variety of sources, including the package manager for your operating system (apt, yum, etc). You can also install it using <code class="docutils literal notranslate"><span class="pre">pip</span></code>, the package manager for Python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">ansible</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="requirements-for-ibm-i-ansible-server">
<h2>Requirements for IBM i Ansible Server<a class="headerlink" href="#requirements-for-ibm-i-ansible-server" title="Link to this heading"></a></h2>
<p>For an IBM i Ansible control node, the latest levels of Ansible should be installed with python pip because there is not a pre-packaged Ansible rpm above version 2.9. Ansible may also be installed from the github source with a stable ansible branch. The following steps can be used to install Ansible with pip.</p>
<ol class="arabic">
<li><p>There are some necessary open source packages that must be installed with yum (if not already present):</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="n">git</span>
<span class="n">yum</span> <span class="n">install</span> <span class="n">python39</span><span class="o">-</span><span class="n">cryptography</span>
<span class="n">yum</span> <span class="n">install</span> <span class="n">python39</span><span class="o">-</span><span class="n">paramiko</span>
<span class="n">yum</span> <span class="n">install</span> <span class="n">pase</span><span class="o">-</span><span class="n">utf8</span><span class="o">-</span><span class="n">locale</span>
<span class="n">yum</span> <span class="n">install</span> <span class="n">sshpass</span>   <span class="c1"># allows specifying ssh password if desired</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Configure ~/.profile for language environment variables (verify with ‘’locale’’ command) such as:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">LANG</span><span class="o">=</span><span class="n">en_US</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
<span class="n">export</span> <span class="n">LC_ALL</span><span class="o">=</span><span class="n">en_US</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Install Ansible. Either full ansible (a) or ansible-core (b).</p>
<ol class="loweralpha">
<li><p>Install Ansible at 7.X (v2.14 core) or 8.X level (v2.15 core) with pip (skip step 3b). For example, to install level 8.1 that includes v2.15.6 ansible-core use the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">ansible</span><span class="o">==</span><span class="mf">8.1</span>
</pre></div>
</div>
</li>
<li><p>Alternatively ansible-core may be installed instead of full ansible, but some additional ibmi dependent collections may need to be installed via ansible-galaxy. For example, to install ansible core v2.15.1 use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">ansible</span><span class="o">-</span><span class="n">core</span><span class="o">==</span><span class="mf">2.15.1</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Add the following path to ~/.profile for the ansible executables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PATH=~/.local/bin:$PATH
</pre></div>
</div>
</li>
<li><p>Ensure dependent collections are installed if only using ansible-core. Perform the following collection install commands if ‘’ansible-galaxy collection list’’ doesn’t show these collections.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ansible</span><span class="o">-</span><span class="n">galaxy</span> <span class="n">collection</span> <span class="n">install</span> <span class="n">community</span><span class="o">.</span><span class="n">general</span>

<span class="n">ansible</span><span class="o">-</span><span class="n">galaxy</span> <span class="n">collection</span> <span class="n">install</span> <span class="n">openstack</span><span class="o">.</span><span class="n">cloud</span>

<span class="n">ansible</span><span class="o">-</span><span class="n">galaxy</span> <span class="n">collection</span> <span class="n">install</span> <span class="n">ansible</span><span class="o">.</span><span class="n">posix</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="installing-using-ansible-galaxy">
<h2>Installing using Ansible Galaxy<a class="headerlink" href="#installing-using-ansible-galaxy" title="Link to this heading"></a></h2>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span></code> command to install a collection from Ansible Galaxy, the package manager for Ansible:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ansible</span><span class="o">-</span><span class="n">galaxy</span> <span class="n">collection</span> <span class="n">install</span> <span class="n">ibm</span><span class="o">.</span><span class="n">power_ibmi</span>
</pre></div>
</div>
</section>
<section id="installing-from-source">
<h2>Installing from source<a class="headerlink" href="#installing-from-source" title="Link to this heading"></a></h2>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span></code> command to install a collection built from source. To build your own collection, follow these steps:</p>
<ol class="arabic simple">
<li><p>Clone the repository:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">IBM</span><span class="o">/</span><span class="n">ansible</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">i</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Build the collection artifact:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">ansible</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">i</span>
<span class="n">ansible</span><span class="o">-</span><span class="n">galaxy</span> <span class="n">collection</span> <span class="n">build</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Install the collection, replacing <code class="docutils literal notranslate"><span class="pre">x.y.z</span></code> with the current version:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ansible</span><span class="o">-</span><span class="n">galaxy</span> <span class="n">collection</span> <span class="n">install</span> <span class="n">ibm</span><span class="o">-</span><span class="n">power_ibmi</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
</section>
<section id="enabling-ibm-i-nodes">
<h2>Enabling IBM i nodes<a class="headerlink" href="#enabling-ibm-i-nodes" title="Link to this heading"></a></h2>
<p>Before IBM i systems can be managed-nodes of Ansible, a few dependencies have to be installed on IBM i.</p>
<blockquote>
<div><ul class="simple">
<li><p>5733SC1 Base and Option 1</p></li>
<li><p>5770DG1</p></li>
<li><p>python3</p></li>
<li><p>python3-itoolkit</p></li>
<li><p>python3-ibm_db</p></li>
</ul>
</div></blockquote>
<p>1. 5733SC1 and 5770DG1 are license programs, you can download them at
<a class="reference external" href="http://www-304.ibm.com/servers/eserver/ess/index.wss">http://www-304.ibm.com/servers/eserver/ess/index.wss</a>.</p>
<ol class="arabic simple" start="2">
<li><p>python3, python3-itoolkit, python3-ibm_db are open source packages. There are a few ways to install these packages and you could choose from one of them.</p></li>
</ol>
<dl class="simple">
<dt><strong>Installing rpm packages manually</strong></dt><dd><p>Rpm packages can be installed via ‘yum’ packages manager on IBM i. However, yum is not shipped by IBM i by default.
Refer the guide here to install yum <a class="reference external" href="https://bitbucket.org/ibmi/opensource/src/master/docs/yum/">https://bitbucket.org/ibmi/opensource/src/master/docs/yum/</a>. Then install these packages by below command:</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">Qopensys</span><span class="o">/</span><span class="n">pkgs</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">yum</span> <span class="n">install</span> <span class="n">python3</span> <span class="n">python3</span><span class="o">-</span><span class="n">itoolkit</span> <span class="n">python3</span><span class="o">-</span><span class="n">ibm_db</span>
</pre></div>
</div>
<p><strong>Installing rpm packages automatically onto IBM i systems which can access internet</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">)</span> <span class="n">Make</span> <span class="n">sure</span> <span class="n">you</span> <span class="n">have</span> <span class="n">IBM</span> <span class="n">i</span> <span class="n">collection</span> <span class="n">installed</span> <span class="n">on</span> <span class="n">your</span> <span class="n">Ansible</span> <span class="n">server</span><span class="o">.</span>
<span class="mi">2</span><span class="p">)</span> <span class="n">Issue</span> <span class="n">below</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">order</span> <span class="n">to</span> <span class="n">use</span> <span class="n">setup</span> <span class="n">playbook</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">IBM</span> <span class="n">i</span><span class="p">:</span>
<span class="n">cd</span> <span class="o">~/.</span><span class="n">ansible</span><span class="o">/</span><span class="n">collections</span><span class="o">/</span><span class="n">ansible_collections</span><span class="o">/</span><span class="n">ibm</span><span class="o">/</span><span class="n">power_ibmi</span><span class="o">/</span><span class="n">playbooks</span>
<span class="mi">3</span><span class="p">)</span> <span class="n">Input</span> <span class="n">information</span> <span class="n">of</span> <span class="n">target</span> <span class="n">IBM</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">host_ibmi</span><span class="o">.</span><span class="n">ini</span> <span class="ow">in</span> <span class="n">order</span> <span class="n">to</span> <span class="n">run</span> <span class="n">playbooks</span><span class="o">.</span>
<span class="mi">4</span><span class="p">)</span> <span class="n">Run</span> <span class="n">setup</span> <span class="n">play</span> <span class="n">book</span> <span class="k">with</span> <span class="n">below</span> <span class="n">command</span><span class="p">:</span>
<span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="o">-</span><span class="n">i</span> <span class="n">host_ibmi</span><span class="o">.</span><span class="n">ini</span> <span class="n">enable</span><span class="o">-</span><span class="n">ansible</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">i</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<dl class="simple">
<dt><strong>Installing rpm packages automatically onto IBM i systems which are offline</strong></dt><dd><p>An ‘Offline’ IBM i means that the IBM i system cannot connect to the internet and is not able to access <a class="reference external" href="https://public.dhe.ibm.com/software/ibmi/products/pase/rpms/repo/">https://public.dhe.ibm.com/software/ibmi/products/pase/rpms/repo/</a>.
Before installing them, you can download installation packages to Ansible server.</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">)</span> <span class="n">Make</span> <span class="n">sure</span> <span class="n">you</span> <span class="n">have</span> <span class="n">IBM</span> <span class="n">i</span> <span class="n">collection</span> <span class="n">installed</span> <span class="n">on</span> <span class="n">your</span> <span class="n">Ansible</span> <span class="n">server</span><span class="o">.</span>
<span class="mi">2</span><span class="p">)</span> <span class="n">Issue</span> <span class="n">below</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">order</span> <span class="n">to</span> <span class="n">use</span> <span class="n">setup</span> <span class="n">playbook</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">IBM</span> <span class="n">i</span><span class="p">:</span>
<span class="n">cd</span> <span class="o">~/.</span><span class="n">ansible</span><span class="o">/</span><span class="n">collections</span><span class="o">/</span><span class="n">ansible_collections</span><span class="o">/</span><span class="n">ibm</span><span class="o">/</span><span class="n">power_ibmi</span><span class="o">/</span><span class="n">playbooks</span>
<span class="mi">3</span><span class="p">)</span> <span class="n">Input</span> <span class="n">information</span> <span class="n">of</span> <span class="n">target</span> <span class="n">IBM</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">host_ibmi</span><span class="o">.</span><span class="n">ini</span> <span class="ow">in</span> <span class="n">order</span> <span class="n">to</span> <span class="n">run</span> <span class="n">playbooks</span><span class="o">.</span>
<span class="mi">4</span><span class="p">)</span> <span class="n">Follow</span> <span class="n">the</span> <span class="n">steps</span> <span class="ow">in</span> <span class="o">~/.</span><span class="n">ansible</span><span class="o">/</span><span class="n">collections</span><span class="o">/</span><span class="n">ansible_collections</span><span class="o">/</span><span class="n">ibm</span><span class="o">/</span><span class="n">power_ibmi</span><span class="o">/</span><span class="n">playbooks</span><span class="o">/</span><span class="n">enable_offline_ibmi</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="mi">5</span><span class="p">)</span> <span class="n">Run</span> <span class="n">playbook</span> <span class="k">with</span> <span class="n">below</span> <span class="n">command</span><span class="o">.</span> <span class="n">The</span> <span class="n">command</span> <span class="n">assumes</span> <span class="n">that</span> <span class="n">the</span> <span class="n">installation</span> <span class="n">packages</span> <span class="n">are</span> <span class="ow">in</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ibmi</span><span class="o">-</span><span class="n">packages</span> <span class="n">directory</span> <span class="n">of</span> <span class="n">Ansible</span> <span class="n">server</span><span class="o">.</span>
<span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="o">-</span><span class="n">i</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">inventory</span> <span class="n">enable_offline_ibmi</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;package_path=/tmp/ibmi-packages&#39;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Power IBM i collection for Ansible" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="getting_started.html" class="btn btn-neutral float-right" title="Running Ansible to manage IBM i systems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, IBM.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>